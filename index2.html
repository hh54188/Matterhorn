<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript">
		function Class() {};

		Class.prototype.create = function () {}

		Class.prototype.extend = function () {

			// 一个类当然最好是函数，但是不可能生成函数，所以只能生成一个实例
			// 一个实例作为类，它的所有方法和需要继承的东西想必要放在prototype中
			console.log("------class.prototype.extend------");

			var constr = this.constructor; 
			var proto = this.constructor.prototype; // Object.getPrototypeOf() 方法也行

			var prototype = new Class();

			for (var i = 0; i < arguments.length; i++) {
				var props = arguments[i];
				for (var name in props){
					prototype[name] = props[name];
				}
			}	

		    // Populate our constructed prototype object
		    Class.prototype = prototype;
   
		    // Enforce the constructor to be what we expect
		    Class.prototype.constructor = Class;								

		    var instance = new Class();

		    return instance
			

			// console.log("instance.constructor.prototype--->", instance.constructor.prototype);
			// console.log("instance.constructor--->", instance.constructor);

			// console.log("getPrototypeOf--->", Object.getPrototypeOf(instance));
			// console.log("instance--->", instance);
			// console.log("instance.constructor--->", instance.constructor);
			// console.log("instance.constructor.prototype--->", instance.constructor.prototype);
			// console.log("instance.constructor.prototype.constructor--->", instance.constructor.prototype.constructor);




		}

		Class.extend = function () {
		    var args  = Array.prototype.slice.call(arguments);  

			// return this.prototype.extend.apply(this, args); 
			// 第一个参数不能是构造函数，因为它最终返回的是实例
			// 而调用prototype.extend也必须是一个实例
		    return this.prototype.extend.apply(new this(), args);
		}

		var Person = Class.extend({
		    name: "lee",
		    age: 12
		})

		console.log("Person------>", Person);

		var Superman = Person.extend({
		    skill: "fly"
		})

		console.log("Superman------>", Superman);

		var Normal = Person.extend({
			sex: "Woman"
		})

		console.log("Normal------>", Normal);
	</script>
</head>
<body>

</body>
</html>